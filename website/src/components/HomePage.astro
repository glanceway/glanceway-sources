---
import {
  Download,
  Newspaper,
  TrendingUp,
  Code,
  Radar,
  Hammer,
  Rss,
  ArrowRight,
  Sparkles,
  BookOpen,
} from "@lucide/astro";
import { useTranslations, getLocalePath } from "../i18n/index";

interface Props {
  locale: string;
}

const { locale } = Astro.props;
const t = useTranslations(locale);

const sourcesPath = getLocalePath(locale, "/sources");

const features = [
  {
    icon: Sparkles,
    titleKey: "ai.createSource.title",
    descKey: "ai.createSource.description",
    link: "https://github.com/glanceway/glanceway-sources/blob/master/glanceway-source.md",
    linkKey: "ai.createSource.link",
  },
  {
    icon: BookOpen,
    titleKey: "ai.mcp.title",
    descKey: "ai.mcp.description",
    link: "https://github.com/glanceway/glanceway-mcp/releases/latest/download/glanceway.mcpb",
    linkKey: "ai.mcp.link",
  },
  {
    icon: Newspaper,
    titleKey: "features.stayInformed.title",
    descKey: "features.stayInformed.description",
    link: sourcesPath,
    linkKey: "features.browseSources",
  },
  {
    icon: TrendingUp,
    titleKey: "features.monitorMarkets.title",
    descKey: "features.monitorMarkets.description",
    link: sourcesPath,
    linkKey: "features.browseSources",
  },
  {
    icon: Code,
    titleKey: "features.devToolkit.title",
    descKey: "features.devToolkit.description",
    link: sourcesPath,
    linkKey: "features.browseSources",
  },
  {
    icon: Radar,
    titleKey: "features.trackEverything.title",
    descKey: "features.trackEverything.description",
    link: sourcesPath,
    linkKey: "features.browseSources",
  },
  {
    icon: Hammer,
    titleKey: "features.buildYourOwn.title",
    descKey: "features.buildYourOwn.description",
    link: "https://github.com/glanceway/glanceway-sources/blob/master/docs/README.md",
    linkKey: "features.buildYourOwn.link",
  },
  {
    icon: Rss,
    titleKey: "features.rssAndBeyond.title",
    descKey: "features.rssAndBeyond.description",
    link: "https://rsshub.netlify.app/routes",
    linkKey: "features.rssAndBeyond.link",
  },
] as const;
---

<!-- Hero -->
<div class="bg-white dark:bg-gray-900">
  <div class="mx-auto max-w-6xl px-6 py-20 text-center">
    <h1
      class="mx-auto max-w-2xl text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl dark:text-white"
    >
      {t("hero.title")}
    </h1>
    <p
      class="mx-auto mt-5 max-w-xl text-lg leading-relaxed text-gray-500 dark:text-gray-400"
    >
      {t("hero.description")}
    </p>
    <p class="mt-3 text-sm font-medium text-gray-400 dark:text-gray-500">
      {t("hero.tagline")}
    </p>
    <div class="mt-8 flex items-center justify-center gap-4">
      <span
        class="inline-flex items-center gap-2 rounded-lg bg-gray-300 px-6 py-3 text-sm font-semibold text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400"
      >
        <Download class="h-4 w-4" />
        {t("hero.download")} — {t("hero.comingSoon")}
      </span>
      <a
        href={getLocalePath(locale, "/sources")}
        class="inline-flex rounded-lg border border-gray-300 px-6 py-3 text-sm font-semibold text-gray-700 no-underline hover:bg-gray-100 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800"
      >
        {t("hero.browseSources")}
      </a>
    </div>
  </div>
</div>

<!-- App Preview -->
<div class="bg-gray-50 dark:bg-gray-950">
  <div class="mx-auto max-w-6xl px-6 py-16">
    <h2
      class="mb-3 text-center text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl dark:text-white"
    >
      {t("appPreview.title")}
    </h2>
    <p
      class="mx-auto mb-12 max-w-lg text-center text-base text-gray-500 dark:text-gray-400"
    >
      {t("appPreview.subtitle")}
    </p>
    <div class="flex justify-center">
      <img
        src="/app-screenshot.png"
        alt="Glanceway app screenshot"
        class="w-full max-w-md rounded-xl shadow-lg"
      />
    </div>
  </div>
</div>

<!-- Features -->
<div class="bg-white dark:bg-gray-900">
  <div class="mx-auto max-w-3xl px-6 py-24">
    <h2
      class="text-center text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl dark:text-white"
    >
      {t("features.title")}
    </h2>
    <p
      class="mx-auto mt-4 mb-16 max-w-xl text-center text-base text-gray-500 dark:text-gray-400"
    >
      {t("features.subtitle")}
    </p>
    <div class="grid grid-cols-1 gap-x-12 gap-y-14 sm:grid-cols-2">
      {
        features.map(({ icon: Icon, titleKey, descKey, link, linkKey }) => (
          <div class="flex gap-5">
            <div class="flex h-14 w-14 shrink-0 items-center justify-center rounded-2xl bg-gray-100 shadow-sm dark:bg-gray-800">
              <Icon class="h-7 w-7 text-gray-600 dark:text-gray-300" />
            </div>
            <div>
              <h3 class="mb-1.5 text-lg font-semibold text-gray-900 dark:text-white">
                {t(titleKey as any)}
              </h3>
              <p class="text-sm leading-relaxed text-gray-500 dark:text-gray-400">
                {t(descKey as any)}
              </p>
              <a
                href={link}
                class="mt-2 inline-flex items-center gap-1 text-sm font-medium text-gray-500 no-underline hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
                target={link.startsWith("http") ? "_blank" : undefined}
              >
                {t(linkKey as any)}
                <ArrowRight class="h-3.5 w-3.5" />
              </a>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</div>

<!-- CTA -->
<div class="bg-gray-50 dark:bg-gray-950">
  <div class="mx-auto max-w-6xl px-6 py-24 text-center">
    <h2
      class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl dark:text-white"
    >
      {t("cta.title")}
    </h2>
    <p class="mx-auto mt-4 max-w-lg text-base text-gray-500 dark:text-gray-400">
      {t("cta.description")}
    </p>
    <div class="mt-8">
      <span
        class="inline-flex items-center gap-2 rounded-lg bg-gray-300 px-6 py-3 text-sm font-semibold text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400"
      >
        <Download class="h-4 w-4" />
        {t("hero.download")} — {t("hero.comingSoon")}
      </span>
    </div>
  </div>
</div>
