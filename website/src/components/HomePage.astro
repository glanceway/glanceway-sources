---
import { Download, ArrowRight } from "@lucide/astro";
import { useTranslations, getLocalePath } from "../i18n/index";

interface Props {
  locale: string;
}

const { locale } = Astro.props;
const t = useTranslations(locale);

const sourcesPath = getLocalePath(locale, "/sources");

const sourceBadges = [
  "Hacker News", "Reddit", "GitHub", "Product Hunt",
  "Stock Quotes", "Crypto", "StackOverflow", "RSS Feeds",
  "Earthquake Alerts", "Spaceflight", "npm Packages", "TV Schedules",
];
---

<!-- Hero -->
<div class="bg-white dark:bg-gray-900">
  <div class="mx-auto max-w-6xl px-6 py-20 text-center">
    <h1
      class="mx-auto max-w-2xl text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl dark:text-white"
    >
      {t("hero.title")}
    </h1>
    <p
      class="mx-auto mt-5 max-w-xl text-lg leading-relaxed text-gray-500 dark:text-gray-400"
    >
      {t("hero.description")}
    </p>
    <p class="mt-3 text-sm font-medium text-gray-400 dark:text-gray-500">
      {t("hero.tagline")}
    </p>
    <div class="mt-8 flex flex-col sm:flex-row items-center justify-center gap-4 w-full sm:w-auto">
      <span
        class="inline-flex w-full sm:w-auto items-center justify-center gap-2 rounded-lg bg-gray-300 px-6 py-3 text-sm font-semibold text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400"
      >
        <Download class="h-4 w-4" />
        {t("hero.download")} — {t("hero.comingSoon")}
      </span>
      <a
        href={getLocalePath(locale, "/sources")}
        class="inline-flex w-full sm:w-auto items-center justify-center rounded-lg border border-gray-300 px-6 py-3 text-sm font-semibold text-gray-700 no-underline hover:bg-gray-100 dark:border-gray-700 dark:text-gray-300 dark:hover:bg-gray-800"
      >
        {t("hero.browseSources")}
      </a>
    </div>
  </div>
</div>

<!-- App Preview -->
<div class="bg-gray-50 dark:bg-gray-950">
  <div class="mx-auto max-w-6xl px-6 py-16">
    <h2
      class="mb-3 text-center text-2xl font-bold tracking-tight text-gray-900 sm:text-3xl dark:text-white"
    >
      {t("appPreview.title")}
    </h2>
    <p
      class="mx-auto mb-12 max-w-lg text-center text-base text-gray-500 dark:text-gray-400"
    >
      {t("appPreview.subtitle")}
    </p>
    <div class="flex justify-center">
      <img
        src="/app-screenshot.png"
        alt="Glanceway app screenshot"
        class="w-full max-w-md rounded-xl shadow-lg"
      />
    </div>
  </div>
</div>

<!-- Features -->
<div class="bg-white dark:bg-gray-900">
  <div class="mx-auto max-w-5xl px-6 py-24">
    <h2
      class="text-center text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl dark:text-white"
    >
      {t("features.title")}
    </h2>
    <p
      class="mx-auto mt-4 mb-20 max-w-xl text-center text-base text-gray-500 dark:text-gray-400"
    >
      {t("features.subtitle")}
    </p>

    <!-- Feature 1: Community Sources (text left, visual right) -->
    <div class="flex flex-col sm:flex-row gap-8 sm:gap-14 items-center">
      <div class="flex-1 min-w-0">
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white">
          {t("features.communitySources.title")}
        </h3>
        <p class="mt-3 text-base leading-relaxed text-gray-500 dark:text-gray-400">
          {t("features.communitySources.description")}
        </p>
        <a
          href={sourcesPath}
          class="mt-4 inline-flex items-center gap-1.5 text-sm font-medium text-gray-600 no-underline hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
        >
          {t("features.browseSources")}
          <ArrowRight class="h-3.5 w-3.5" />
        </a>
      </div>
      <div class="flex-1 min-w-0">
        <div class="flex flex-wrap gap-2 justify-center sm:justify-start">
          {sourceBadges.map((name) => (
            <span class="inline-flex items-center rounded-full bg-gray-100 px-3.5 py-1.5 text-sm font-medium text-gray-700 dark:bg-gray-800 dark:text-gray-300">
              {name}
            </span>
          ))}
        </div>
      </div>
    </div>

    <!-- Feature 2: RSS Support (visual left, text right) -->
    <div class="flex flex-col sm:flex-row-reverse gap-8 sm:gap-14 items-start mt-24">
      <div class="flex-1 min-w-0">
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white">
          {t("features.rss.title")}
        </h3>
        <p class="mt-3 text-base leading-relaxed text-gray-500 dark:text-gray-400">
          {t("features.rss.description")}
        </p>
        <a
          href="https://rsshub.netlify.app/routes"
          target="_blank"
          class="mt-4 inline-flex items-center gap-1.5 text-sm font-medium text-gray-600 no-underline hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
        >
          {t("features.rss.linkRsshub")}
          <ArrowRight class="h-3.5 w-3.5" />
        </a>
      </div>
      <div class="flex-1 min-w-0 w-full">
        <div class="space-y-2.5">
          {["https://hnrss.org/frontpage", "https://www.reddit.com/r/programming/.rss", "https://feeds.arstechnica.com/arstechnica/technology-lab"].map((url) => (
            <div class="flex items-center gap-3 rounded-xl bg-gray-100 px-4 py-3 dark:bg-gray-800">
              <span class="shrink-0 text-orange-500 dark:text-orange-400">
                <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"/><path d="M4 4a16 16 0 0 1 16 16"/><circle cx="5" cy="19" r="1"/></svg>
              </span>
              <span class="text-sm text-gray-600 dark:text-gray-300 truncate font-mono">{url}</span>
            </div>
          ))}
        </div>
      </div>
    </div>

    <!-- Feature 3: Create Sources with AI (text left, visual right) -->
    <div class="flex flex-col sm:flex-row gap-8 sm:gap-14 items-start mt-24">
      <div class="flex-1 min-w-0">
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white">
          {t("features.aiCreate.title")}
        </h3>
        <p class="mt-3 text-base leading-relaxed text-gray-500 dark:text-gray-400">
          {t("features.aiCreate.description")}
        </p>
        <a
          href="https://github.com/glanceway/glanceway-sources/blob/master/glanceway-source.md"
          target="_blank"
          class="mt-4 inline-flex items-center gap-1.5 text-sm font-medium text-gray-600 no-underline hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
        >
          {t("features.aiCreate.link")}
          <ArrowRight class="h-3.5 w-3.5" />
        </a>
      </div>
      <div class="flex-1 min-w-0 w-full">
        <div class="space-y-2.5">
          {[t("features.aiCreate.prompt1"), t("features.aiCreate.prompt2"), t("features.aiCreate.prompt3")].map((prompt) => (
            <div class="rounded-xl bg-gray-100 px-4 py-3 text-sm text-gray-700 dark:bg-gray-800 dark:text-gray-300 italic">
              &ldquo;{prompt}&rdquo;
            </div>
          ))}
        </div>
        <ol class="mt-5 space-y-2.5 text-sm text-gray-500 dark:text-gray-400">
          <li class="flex gap-3 items-start">
            <span class="flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-gray-200 text-xs font-semibold text-gray-600 dark:bg-gray-700 dark:text-gray-300">1</span>
            <span>
              <a href="https://github.com/glanceway/glanceway-sources/blob/master/glanceway-source.md" target="_blank" class="font-medium text-gray-700 underline decoration-gray-300 hover:text-gray-900 dark:text-gray-300 dark:decoration-gray-600 dark:hover:text-white">{t("features.aiCreate.step1")}</a>
            </span>
          </li>
          <li class="flex gap-3 items-start">
            <span class="flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-gray-200 text-xs font-semibold text-gray-600 dark:bg-gray-700 dark:text-gray-300">2</span>
            <span>{t("features.aiCreate.step2")}</span>
          </li>
          <li class="flex gap-3 items-start">
            <span class="flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-gray-200 text-xs font-semibold text-gray-600 dark:bg-gray-700 dark:text-gray-300">3</span>
            <span>{t("features.aiCreate.step3")}</span>
          </li>
        </ol>
      </div>
    </div>

    <!-- Feature 4: AI Reading & Summarization (visual left, text right) -->
    <div class="flex flex-col sm:flex-row-reverse gap-8 sm:gap-14 items-start mt-24">
      <div class="flex-1 min-w-0">
        <h3 class="text-2xl font-bold text-gray-900 dark:text-white">
          {t("features.aiReading.title")}
        </h3>
        <p class="mt-3 text-base leading-relaxed text-gray-500 dark:text-gray-400">
          {t("features.aiReading.description")}
        </p>
        <a
          href="https://github.com/glanceway/glanceway-mcp/releases/latest/download/glanceway.mcpb"
          class="mt-4 inline-flex items-center gap-1.5 text-sm font-medium text-gray-600 no-underline hover:text-gray-900 dark:text-gray-400 dark:hover:text-white"
        >
          {t("features.aiReading.link")}
          <ArrowRight class="h-3.5 w-3.5" />
        </a>
      </div>
      <div class="flex-1 min-w-0 w-full">
        <div class="space-y-4 text-sm leading-relaxed">
          <!-- User message -->
          <div class="flex gap-3 justify-end">
            <div class="rounded-2xl rounded-tr-sm bg-blue-500 px-4 py-2.5 text-white max-w-[90%]">
              {t("features.aiReading.chatUser")}
            </div>
          </div>
          <!-- AI response -->
          <div class="flex gap-3">
            <div class="flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-gray-200 dark:bg-gray-700">
              <span class="text-xs font-bold text-gray-500 dark:text-gray-400">AI</span>
            </div>
            <div class="rounded-2xl rounded-tl-sm bg-gray-100 px-4 py-2.5 text-gray-700 dark:bg-gray-700 dark:text-gray-300 max-w-[90%] [&_b]:font-medium">
              <p class="text-xs text-gray-400 dark:text-gray-500 mb-1.5">{t("features.aiReading.chatStatus")}</p>
              <p set:html={t("features.aiReading.chatResponse")} />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- CTA -->
<div class="bg-gray-50 dark:bg-gray-950">
  <div class="mx-auto max-w-6xl px-6 py-24 text-center">
    <h2
      class="text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl dark:text-white"
    >
      {t("cta.title")}
    </h2>
    <p class="mx-auto mt-4 max-w-lg text-base text-gray-500 dark:text-gray-400">
      {t("cta.description")}
    </p>
    <div class="mt-8">
      <span
        class="inline-flex items-center gap-2 rounded-lg bg-gray-300 px-6 py-3 text-sm font-semibold text-gray-500 cursor-not-allowed dark:bg-gray-700 dark:text-gray-400"
      >
        <Download class="h-4 w-4" />
        {t("hero.download")} — {t("hero.comingSoon")}
      </span>
    </div>
  </div>
</div>
